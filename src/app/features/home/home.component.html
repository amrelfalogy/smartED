<div class="header">
    <div class="row">
            <!-- <div class="col-md-6 content">
                <h1>ابدأ رحلتك التعليمية بالطريقة التي تناسبك</h1>
                <p>
                    منصتنا توفر لك دروسًا تفاعلية وشاملة من نخبة المعلمين، مصممة لترتقي بمستواك الدراسي وتُحقق لك أفضل النتائج.
                </p>
                <a class="btn btn-primary btn-lg" style="width:175px;" routerLink="/courses">ابدأ الآن</a>
            </div> -->
            <div class="col-12 text-center">
                <img src="assets/imgs/header.jpeg" alt="header" class="img-fluid header-illustration">
            </div>
        </div>
    </div>
    
    <div class="container">
    <!-- Features -->
    <div class="features">
        <div class="row">
            <div class="col-sm-6 col-lg-3">
                <div class="card-item d-flex flex-column align-items-center text-center py-30 px-5 w-100">
                    <div class="icon-box teacher">
                        <i class="pi pi-crown"></i>
                    </div>
                    <h4 class="feature-title">أفضل المعلمين</h4>
                    <p class="feature-desc">ابدأ التعلم مع المعلمين الرائدين في تخصصهم</p>
                </div>
            </div>
            <div class="col-sm-6 col-lg-3">
                <div class="card-item d-flex flex-column align-items-center text-center py-30 px-5 w-100">
                    <div class="icon-box student">
                        <i class="pi pi-sparkles"></i>
                    </div>
                    <h4 class="feature-title">طلاب سعداء</h4>
                    <p class="feature-desc">نظم حياتك الدراسية وشارك في التطور التعليمي</p>
                </div>
            </div>
            <div class="col-sm-6 col-lg-3">
                <div class="card-item d-flex flex-column align-items-center text-center py-30 px-5 w-100">
                    <div class="icon-box live">
                        <i class="pi pi-headphones"></i>
                    </div>
                    <h4 class="feature-title">حصص مباشرة</h4>
                    <p class="feature-desc">طور مهاراتك عن طريق افضل طرق التعليم</p>
                </div>
            </div>
            <div class="col-sm-6 col-lg-3">
                <div class="card-item d-flex flex-column align-items-center text-center py-30 px-5 w-100">
                    <div class="icon-box video">
                        <i class="pi pi-microphone"></i>
                    </div>
                    <h4 class="feature-title">كورسات مسجلة</h4>
                    <p class="feature-desc">تعلم بدون عوائق الوقت والمكان</p>
                </div>
            </div>
        </div>
    </div>

    <!-- How it works -->
    <section class="how-it-works container">
        <div class="container">
        <h2 class="section-title">كيف تعمل منصتنا؟</h2>
        <div class="timeline row">
            <div class="step col-md-5 " *ngFor="let step of steps; let i = index">
            <div class="step-icon">
                <i class="pi" [ngClass]="step.icon"></i>
                <span class="step-index">{{ i + 1 }}</span>
            </div>
            <div class="step-content">
                <h5>{{ step.title }}</h5>
                <p>{{ step.desc }}</p>
            </div>
            </div>
        </div>
        </div>
    </section>

    <section class="home-section">
        <!-- ✅ Newest Subjects Carousel with Real Data (unchanged) -->
        <app-card-carousel
            [items]="courses"
            sectionTitle="أحدث المواد"
            sectionHint="مواد مضافة حديثًا"
            viewAllText="عرض الكل"
            viewAllLink="/courses">
            <ng-template #cardTemplate let-course>
                <!-- ✅ Loading State -->
                <div *ngIf="isLoadingCourses" class="course-card-loading">
                    <div class="loading-placeholder">
                        <div class="loading-image"></div>
                        <div class="loading-content">
                            <div class="loading-line"></div>
                            <div class="loading-line short"></div>
                            <div class="loading-line"></div>
                        </div>
                    </div>
                </div>

                <!-- ✅ Error State -->
                <div *ngIf="coursesError && !isLoadingCourses" class="course-card-error">
                    <div class="error-content">
                        <i class="pi pi-exclamation-triangle"></i>
                        <p>{{ coursesError }}</p>
                        <button class="btn btn-sm btn-outline-primary" (click)="reloadCourses()">
                            <i class="pi pi-refresh me-1"></i>
                            إعادة المحاولة
                        </button>
                    </div>
                </div>

                <!-- ✅ Course Card with Real Data -->
                <div *ngIf="!isLoadingCourses && !coursesError" class="course-card-content" (click)="viewCourse(course)">
                    <img 
                        [src]="course.image || course.imageUrl || course.thumbnail || 'assets/imgs/bio.jpg'"
                        [alt]="course.name"
                        class="card-image"
                        (error)="onImageError($event)"
                    />
                    <div class="card-info course-info">
                        <!-- Instructor -->
                        <div class="instructor-info">
                            <img
                                [src]="course.instructorImg || 'assets/imgs/bio.jpg'"
                                [alt]="course.instructor"
                                class="instructor-avatar"
                                (error)="onImageError($event)"
                            />
                            <span class="instructor-name">{{ course.instructor }}</span>
                        </div>

                        <!-- Title -->
                        <h4 class="course-title">{{ course.name }}</h4>

                        <!-- Academic Year + Tags + Price -->
                        <div class="meta-row">
                            <span class="academic-year">{{ course.academicYearName }}</span>
                        </div>
                        <div class="meta-row tags-row">
                            <span
                                class="chip"
                                [ngClass]="course.lessonType === 'center_recorded' ? 'chip--center' : 'chip--studio'"
                            >
                                {{ course.lessonType === 'center_recorded' ? 'الدروس المسجلة - المركز' : 'الدروس المنتجة - الاستوديو' }}
                            </span>
                        </div>              
                        <!-- Actions -->
                        <div class="actions">
                            <button
                                class="btn btn-primary details-btn"
                                (click)="viewCourse(course); $event.stopPropagation()"
                            >
                                <i class="pi pi-info-circle me-2"></i>
                                عرض التفاصيل
                            </button>
                        </div>
                    </div>
                </div>
            </ng-template>
        </app-card-carousel>

        <!-- ✅ NEW: Real Teachers Carousel -->
       <app-card-carousel
    [items]="teachers"
    sectionTitle="فريق المعلمين المتميز"
    sectionHint="نخبة من أفضل المدرسين"
    viewAllText="عرض الكل"
    viewAllLink="/teachers">
    <ng-template #cardTemplate let-teacher>
        <!-- Loading State -->
        <div *ngIf="isLoadingTeachers" class="teacher-card-loading">
            <div class="loading-placeholder">
                <div class="loading-avatar"></div>
                <div class="loading-content">
                    <div class="loading-line"></div>
                    <div class="loading-line short"></div>
                    <div class="loading-line medium"></div>
                </div>
            </div>
        </div>

        <!-- Error State -->
        <div *ngIf="teachersError && !isLoadingTeachers" class="teacher-card-error">
            <div class="error-content">
                <i class="pi pi-exclamation-triangle"></i>
                <p>{{ teachersError }}</p>
                <button class="btn btn-sm btn-outline-primary" (click)="retryLoadTeachers()">
                    <i class="pi pi-refresh me-1"></i>
                    إعادة المحاولة
                </button>
            </div>
        </div>

        <!-- ✅ UPDATED: Teacher Card with Fixed Image URLs -->
        <div *ngIf="!isLoadingTeachers && !teachersError" class="teacher-card-content" (click)="viewTeacher(teacher)">
            <div class="teacher-photo-container">
                <img 
                    *ngIf="getTeacherProfileImage(teacher)"
                    [src]="getTeacherProfileImage(teacher)" 
                    [alt]="teacher.firstName + ' ' + teacher.lastName"
                    class="card-image teacher-photo"
                    (error)="onImageError($event)"
                    loading="lazy" />
                
                <!-- Teacher Placeholder -->
                <div *ngIf="!getTeacherProfileImage(teacher)" class="teacher-placeholder">
                    <span class="teacher-initials">
                        {{ (teacher.firstName?.charAt(0) || '') + (teacher.lastName?.charAt(0) || '') }}
                    </span>
                </div>
            </div>
            
            <div class="card-info teacher-info">
                <div class="teacher-header">
                    <h4 class="teacher-name">
                        {{ teacher.firstName }} {{ teacher.lastName }}
                        <i class="pi pi-verified verified" *ngIf="teacher.verified"></i>
                    </h4>
                </div>
                
                <p class="specialization">
                    <i class="pi pi-briefcase me-1"></i>
                    {{ teacher.specialization || 'معلم متخصص' }}
                </p>
                
                <p class="experience" *ngIf="teacher.experience">
                    <i class="pi pi-clock me-1"></i>
                    {{ teacher.experience }} سنة خبرة
                </p>

                <p class="teacher-bio" *ngIf="teacher.bio">
                    {{ teacher.bio.length > 80 ? (teacher.bio.substring(0, 80) + '...') : teacher.bio }}
                </p>

                <div class="rating" *ngIf="teacher.rating">
                    <i
                        *ngFor="let star of [].constructor(5); let i = index"
                        class="pi"
                        [ngClass]="i < teacher.rating ? 'pi-star-fill' : 'pi-star'"
                    ></i>
                    <span class="rating-count">({{ teacher.rating }}.0)</span>
                </div>

                <div class="actions">
                    <button class="btn btn-primary teacher-btn" (click)="viewTeacher(teacher); $event.stopPropagation()">
                        <i class="pi pi-user me-2"></i>
                        عرض الملف
                    </button>
                </div>
            </div>
        </div>
    </ng-template>
</app-card-carousel>

       
    </section>
</div>